<!-- index.html -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Text Encryption</title>
</head>

<body>

    <div class="container mt-5">
        <div class="row">
            <div class="col-md-6">
                <h2 class="text-center mb-4">Text Encryption</h2>

                <div class="mb-3">
                    <label for="operation-select" class="form-label">Выберите операцию:</label>
                    <select class="form-select" id="operation-select">
                        <option value="encrypt">Зашифровать</option>
                        <option value="decrypt">Расшифровать</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="cipher-select" class="form-label">Выберите шифр:</label>
                    <select class="form-select" id="cipher-select">
                        <option value="caesar">Шифр Цезаря</option>
                        <option value="atbash">Шифр Атбаш</option>
                        <option value="polybius">Квадрат Полибия</option>
                    </select>
                </div>

                <div class="mb-3" id="key-input">
                    <label for="key" class="form-label">Введите ключ:</label>
                    <input type="number" class="form-control" id="key" placeholder="Введите ключ">
                </div>

                <div class="mb-3">
                    <label for="mode-select" class="form-label">Выберите режим:</label>
                    <select class="form-select" id="mode-select">
                        <option value="normal">Обычный</option>
                        <option value="advanced">Расширенный</option>
                    </select>
                </div>
            </div>

            <div class="col-md-6">
                <div class="mb-3">
                    <label for="text-input" class="form-label">Введите текст или цитату:</label>
                    <textarea class="form-control" id="text-input" rows="5" placeholder="Введите текст"></textarea>
                </div>

                <div class="mb-3">
                    <label for="result-text" class="form-label">Результат:</label>
                    <textarea class="form-control" id="result-text" rows="5" readonly></textarea>
                </div>

                <button type="button" class="btn btn-primary" onclick="performOperation()">Выполнить операцию</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-3-typeahead@4.0.2/dist/bootstrap3-typeahead.min.js"></script>
    <script src="Ciphers.js"></script>
    <script>
        $(document).ready(function () {
            // Инициализация автодополнения
            $('#text-input').typeahead({
                source: ['А', 'Б', 'В', 'Г', 'Д', 'Е', 'Ё', 'Ж', 'З', 'И', 'Й', 'К', 'Л', 'М', 'Н', 'О', 'П', 'Р', 'С', 'Т', 'У', 'Ф', 'Х', 'Ц', 'Ч', 'Ш', 'Щ', 'Ъ', 'Ы', 'Ь', 'Э', 'Ю', 'Я'],
                minLength: 1
            });

            // Покажем или скроем поле ввода ключа при изменении выбора шифра
            $('#cipher-select').change(function () {
                showKeyInput();
            });

            // Покажем или скроем поле ввода ключа при загрузке страницы
            $(document).ready(function () {
                showKeyInput();
            });
        });

        function showKeyInput() {
            var cipherSelect = $('#cipher-select').val();
            if (cipherSelect === 'caesar') {
                $('#key-input').show();
            } else {
                $('#key-input').hide();
            }
        }

        function performOperation() {
            var selectedOperation = $('#operation-select').val();
            var selectedCipher = $('#cipher-select').val();
            var selectedMode = $('#mode-select').val();
            var inputText = $('#text-input').val();

            var resultText = '';
            var key = $('#key').val(); // Получаем значение ключа

            if (selectedCipher === 'caesar') {
                resultText = caesarCipher(inputText, Number(key), selectedMode === 'advanced');
            } else if (selectedCipher === 'atbash') {
                resultText = atbashCipher(inputText, selectedMode === 'advanced');
            } else if (selectedCipher === 'polybius') {
                resultText = polybiusSquareEncrypt(inputText);
            }

            $('#result-text').val(resultText);
        }
    </script>

</body>

</html>
